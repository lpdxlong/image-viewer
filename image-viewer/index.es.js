var e=Object.defineProperty,i=Object.defineProperties,n=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(i,n,t)=>n in i?e(i,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[n]=t;import{defineComponent as c,reactive as s,toRefs as m,watch as r,openBlock as u,createBlock as g,Transition as d,withCtx as h,withDirectives as v,createElementVNode as f,createElementBlock as w,vShow as x,toDisplayString as p,normalizeClass as b,Fragment as y,createCommentVNode as S,renderList as C,normalizeStyle as P,createApp as k,getCurrentInstance as F,h as E}from"vue";const O=c({name:"imageViewer",props:{images:{type:Array,default:()=>[]},startPosition:{type:Number,default:0},show:{type:Boolean,default:!1},page:{type:Number,default:0},thumbnail:{type:Boolean,default:!0}},setup(e,{expose:i,emit:n}){const t=s({config:{imgMaxWidth:.8*window.innerWidth,imgMaxHeight:.8*window.innerHeight,fullScreen:!1},imgStyle:{width:"auto",height:"auto"},imgVisible:!1,index:0,activePage:0}),{config:l,imgStyle:o,imgVisible:a,index:c,activePage:u}=m(t);function g(){t.imgStyle={width:"auto",height:"auto"}}function d(i){if(e.images&&e.images[t.index]){let i=new Image;i.src=e.images[t.index].url,i.onload=function(){h(i.width,i.height)}}}function h(e,i){let n=function(e,i){let n=0,{imgMaxWidth:l,imgMaxHeight:o}=t.config;if(e>l||i>o)return n=e-l>i-o?l/e:o/i,{width:e*n,height:i*n};return{width:e,height:i}}(e,i);n.width-10>t.config.imgMaxWidth||n.height-10>t.config.imgMaxHeight?h(n.width,n.height):(t.imgStyle=n,t.imgVisible=!0)}function v(){let e=document.querySelector(".image-viewer-nav-thumb").width;document.querySelector(".image-viewer-nav-thumb > div:first-child").style.marginLeft=-e*t.activePage+"px"}function f(i){const n=e.images.length-1;"prev"===i&&8*t.activePage>=8?t.activePage--:"next"===i&&8*t.activePage<n&&n-8*t.activePage>8&&t.activePage++,v()}function w(){if(t.config.fullScreen)document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),t.config.fullScreen=!1;else{const e=document.documentElement.requestFullScreen||document.documentElement.webkitRequestFullScreen||document.documentElement.mozRequestFullScreen||document.documentElement.msRequestFullscreen;e&&e.call(document.documentElement),t.config.fullScreen=!0}}return r((()=>e.startPosition),(e=>{t.index=+e})),r(c,(()=>{g(),t.imgVisible=!1,d()})),r((()=>e.show),(i=>{e.images.length?(i?(g(),document.body.style.overflow="hidden"):document.body.style.overflow="",d()):n("close",{index:t.index})})),r((()=>e.page),(e=>{t.activePage=e,v()})),window.onresize=()=>{document.fullscreenEnabled||window.fullScreen||document.webkitIsFullScreen||document.msFullscreenEnabled||(t.config.fullScreen=!1)},{config:l,imgStyle:o,imgVisible:a,index:c,imgChange:function(i){const n=e.images.length-1;"prev"===i?(t.index=t.index--<=0?0:t.index,t.index<8*t.activePage&&f("prev")):"next"===i?(t.index=t.index++>=n?n:t.index,t.index>=8*(t.activePage+1)&&f("next")):isNaN(i)||(t.index=i<=0?0:i>=n?n:i)},pageChange:f,close:function(){t.config.fullScreen&&w(),n("close")},fullScreen:w,download:function(e){window.open(e)}}}}),j={class:"image-viewer"},V={key:0,class:"image-viewer-content"},q=["src","alt","width","height"],M={class:"image-viewer-info"},z={class:"right"},H={key:1,class:"image-viewer-nav"},I=[f("i",{class:"img-v-icon-arrow-left"},null,-1)],N={class:"image-viewer-nav-main"},W={class:"image-viewer-nav-thumb"},R=["alt","title","onClick"],B=[f("i",{class:"img-v-icon-arrow-right"},null,-1)];O.render=function(e,i,n,t,l,o){return u(),g(d,{name:"image-viewer-fade"},{default:h((()=>[v(f("div",j,[f("i",{class:"image-viewer-close img-v-icon-close",onClick:i[0]||(i[0]=(...i)=>e.close&&e.close(...i))}),e.images.length?(u(),w("div",V,[v(f("img",{src:e.images[e.index].url,alt:e.images[e.index].name?e.images[e.index].name:"",width:e.imgStyle.width,height:e.imgStyle.height},null,8,q),[[x,e.imgVisible]]),f("div",M,[f("p",null,p(e.images[e.index].name?e.images[e.index].name:"")+"("+p(e.index+1+"/"+e.images.length)+")",1),f("div",z,[f("i",{class:b(`img-v-icon-${e.config.fullScreen?"cancel-":""}full-screen`),onClick:i[1]||(i[1]=(...i)=>e.fullScreen&&e.fullScreen(...i))},null,2),f("i",{class:"img-v-icon-download",onClick:i[2]||(i[2]=i=>e.download(e.images[e.index].url))})])]),e.images.length>1?(u(),w(y,{key:0},[f("div",{class:"image-viewer-content-prev",onClick:i[3]||(i[3]=i=>e.imgChange("prev"))}),f("div",{class:"image-viewer-content-next",onClick:i[4]||(i[4]=i=>e.imgChange("next"))})],64)):S("",!0)])):S("",!0),e.thumbnail?(u(),w("div",H,[f("div",{class:"image-viewer-nav-prev",onClick:i[5]||(i[5]=i=>e.pageChange("prev"))},I),f("div",N,[f("div",W,[(u(!0),w(y,null,C(e.images,((i,n)=>(u(),w("div",{key:n,class:b({active:n===e.index}),alt:i.name?i.name:"",title:i.name?i.name:"",style:P({backgroundImage:"url("+i.url+")"}),onClick:i=>e.imgChange(n)},null,14,R)))),128))])]),f("div",{class:"image-viewer-nav-next",onClick:i[6]||(i[6]=i=>e.pageChange("next"))},B)])):S("",!0)],512),[[x,e.show]])])),_:1})};let A=null;function D(){let e=function(e){const i=k(e),n=document.createElement("div",{class:"vue-image-viewer-full"});return document.body.appendChild(n),{instance:i.mount(n),unmount(){i.unmount(),document.body.removeChild(n)}}}({setup(e,{expose:c}){const m=s({show:!1,startPosition:0,page:0,images:[]});function r(){m.show=!1}const u=F();return u&&Object.assign(u.proxy,{open:function(e){m.show=!0,m.startPosition=e},close:function(){m.show=!1},images:function(e){m.images=e}}),()=>{return E(O,(e=((e,i)=>{for(var n in i||(i={}))l.call(i,n)&&a(e,n,i[n]);if(t)for(var n of t(i))o.call(i,n)&&a(e,n,i[n]);return e})({},m),i(e,n({onClose:r}))));var e}}});({instance:A}=e)}function L(){return A||D(),A}var $={show(e=0){L().open(e)},hide(){L().close()},images(e){L().images(e)}};export{$ as default};
